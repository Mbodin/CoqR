{
	"name": "CoqR",
	"version": "1.0",
	"description": "A Coq formalisation of the R programming language",
	"license": "GPL-2.0",
	"esy": {
		"build": "make",
		"buildsInSource": "_build",
		"buildEnv": {
			"COQBIN": "#{@opam/coq.bin}/",
			"COQLIB": "#{@opam/coq.lib}/coq/",
			"COQPATH": "#{coq-flocq.install}/coq:#{coq-prelude.install}/lib/coq:#{tlc.install}/lib:#{coq-paco.install}/user-contrib:#{coq-itree.install}/lib/coq/user-contrib:#{coq-ext-lib.install}/user-contrib",
			"TARGETDIR": "#{self.target_dir}"
		}
	},
	"scripts": {
		"run": "make run",
		"run_bisect": "make run_bisect",
		"lrun": "make lrun",
		"lrun_bisect": "make lrun_bisect",
		"clean": "make clean_all",
		"report": "make report"
	},
	"dependencies": {
		"ocaml": ">=4.5 <4.12",
		"@opam/dune": ">=2.6",
		"@opam/odoc": "*",
		"@opam/menhir": ">=20190626 <20200123",
		"@opam/ocamlfind": "1.8.1",
		"@opam/coq": "8.13.2",
		"coq-flocq": "3.1.2",
		"coq-paco": "github:Mbodin/coq-paco#578aa3c31cae3ecb2232e0f10bad3470c33554cb",
		"@opam/extlib": ">=0.11.4",
		"@opam/bisect": "*",
		"coq-prelude": "github:Mbodin/coq-prelude#29cdfa7fa87564209594435ed37d9db77d2875ca",
		"tlc": "*",
		"coq-itree": "github:Mbodin/InteractionTrees#7d9c3e998255cf02476c66a2eacd9cf5a9fe1fa3",
		"coq-ext-lib": ">=0.11.1"
	},
	"resolutions": {
		"tlc": {
			"source": "github:charguer/tlc#2415b8dcf1138ade515ea4bfdcd5460be1ef4db4",
			"override": {
				"dependencies": {
					"@opam/coq": "*"
				},
				"buildEnv": {
					"HOME": "#{self.target_dir}",
					"COQBIN": "#{@opam/coq.bin}/"
				},
				"buildsInSource": true,
				"build": [
					[ "sed", "-i", "s|-include settings\\.sh|COQLIBINSTALL=#{self.install}/lib\\nCOQDOCINSTALL=#{self.install}|", "src/Makefile" ],
					[ "make" ]
				],
				"install": "make install"
			}
		},
		"coq-flocq": {
			"source": "git:https://gitlab.inria.fr/flocq/flocq.git#ca655d2542bdcf024bce5c26dbc0f13b856aa1f6",
			"override": {
				"dependencies": {
					"@opam/coq": "*",
					"@opam/conf-autoconf": "*",
					"@opam/conf-g++": "*"
				},
				"buildEnv": {
					"HOME": "#{self.target_dir}",
					"COQBIN": "#{@opam/coq.bin}",
					"COQLIB": "#{@opam/coq.lib}/coq/",
					"COQPATH": "#{@opam/coq.lib}/coq/user-contrib/",
					"COQUSERCONTRIB": "#{self.install}/coq"
				},
				"buildsInSource": true,
				"build": [
					[ "autoconf" ],
					[ "./configure" ],
					[ "./remake", "--jobs=2" ]
				],
				"install": [
					[ "./remake", "install" ]
				]
			}
		},
		"coq-ext-lib": {
			"source": "github:minkiminki/coq-ext-lib#6ff2bdb069b7d34f2f429ce594b08fe327502770",
			"override": {
				"dependencies": {
					"@opam/coq": "*"
				},
				"buildsInSource": true,
				"buildEnv": {
					"HOME": "#{self.target_dir}",
					"COQBIN": "#{@opam/coq.bin}/",
					"COQLIB": "#{@opam/coq.lib}/coq/",
					"COQMAKEFILE": "Makefile.coq"
				},
				"build": [
					[ "coq_makefile", "-f", "_CoqProject", "-o", "Makefile.coq", "-install", "user", "DESTDIR", "=", "#{self.install}", "COQMF_WINDRIVE", "=", "#{@opam/coq.lib}/coq" ],
					[ "make", "-j", "theories" ]
				],
				"install": [
					[ "make", "install" ]
				]
			}
		}
	}
}

