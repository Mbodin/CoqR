{
	"name": "CoqR",
	"version": "1.0",
	"description": "A Coq formalisation of the R programming language",
	"license": "GPL-2.0",
	"esy": {
		"build": "make",
		"buildsInSource": true,
		"buildEnv": {
			"COQBIN": "#{@opam/coq.bin}/",
			"COQLIB": "#{@opam/coq.lib}/coq/",
			"COQPATH": "#{coq-flocq.install}/coq:#{coq-prelude.install}/coq:#{tlc.install}:#{coq-paco.install}"
		}
	},
	"scripts": {
		"run": "make run",
		"run_bisect": "make run_bisect",
		"lrun": "make lrun",
		"lrun_bisect": "make lrun_bisect",
		"clean": "make clean_all",
		"report": "make report"
	},
	"dependencies": {
		"ocaml": ">=4.5",
		"@opam/dune": ">=2.4",
		"@opam/odoc": "*",
		"@opam/ocamlfind": "1.8.1",
		"@opam/ocamlbuild": "*",
		"@opam/menhir": "*",
		"@opam/coq": "^8.13",
		"coq-flocq": "3.1.2",
		"coq-paco": "github:Mbodin/coq-paco#40cea8feac992e4b69266516ed70f0916366d622",
		"@opam/extlib": "*",
		"@opam/bisect": "*",
		"coq-prelude": "github:Mbodin/coq-prelude#f4a63ff15337a6edd69923b88440d78e8e1c7a2f",
		"tlc": "*"
	},
	"resolutions": {
		"tlc": {
			"source": "github:charguer/tlc#92434f5192721b9e7b687a6ca13ece4a63e7c134",
			"override": {
				"dependencies": {
					"@opam/coq": "^8.13"
				},
				"buildEnv": {
					"HOME": "#{self.target_dir}",
					"COQBIN": "#{@opam/coq.bin}/"
				},
				"buildsInSource": true,
				"build": [
					[ "sed", "-i", "s|-include settings\\.sh|COQLIBINSTALL=#{self.install}\\nCOQDOCINSTALL=#{self.install}|", "src/Makefile" ],
					[ "make" ]
				],
				"install": "make install"
			}
		},
		"coq-flocq": {
			"source": "git:https://gitlab.inria.fr/flocq/flocq.git#c4a5db7d7a018a3c88e51da45b8910aca3e57de1",
			"override": {
				"version": "3.1.2",
				"dependencies": {
					"@opam/coq": "^8.13",
					"@opam/conf-autoconf": "*",
					"@opam/conf-g++": "*"
				},
				"buildEnv": {
					"HOME": "#{self.target_dir}",
					"COQBIN": "#{@opam/coq.bin}",
					"COQLIB": "#{@opam/coq.lib}/coq/",
					"COQPATH": "#{@opam/coq.lib}/coq/user-contrib/"
				},
				"buildsInSource": true,
				"build": [
					[ "autoconf" ],
					[ "./configure", "--libdir=#{self.install}/coq/Flocq" ],
					[ "./remake", "--jobs=2" ]
				],
				"install": [
					[ "./remake", "install" ]
				]
			}
		}
	}
}

